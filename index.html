<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>–ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–Ω–∞–ª–∏–∑–æ–≤ —Ä–µ–±—ë–Ω–∫–∞ (0‚Äì12 –ª–µ—Ç)</title>
  <style>
    :root { --bd:#e5e7eb; --tx:#111827; --mut:#6b7280; --bg:#f9fafb; }
    *{ box-sizing:border-box; }
    body{
      margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--tx); background:var(--bg);
    }
    .wrap{ max-width:1100px; margin:0 auto; padding:20px; }
    .top{
      display:flex; flex-wrap:wrap; gap:12px; align-items:flex-end; justify-content:space-between;
      margin-bottom:14px;
    }
    h1{ font-size:20px; margin:0; }
    .note{ color:var(--mut); font-size:13px; margin-top:6px; }
    .grid{
      display:grid; grid-template-columns: 1fr 1fr; gap:14px;
    }
    @media (max-width: 900px){ .grid{ grid-template-columns:1fr; } }
    .card{
      background:white; border:1px solid var(--bd); border-radius:14px; padding:14px;
      box-shadow: 0 1px 2px rgba(0,0,0,.04);
    }
    .row{ display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
    label{ font-size:13px; color:var(--mut); display:block; margin-bottom:6px; }
    input[type="number"]{
      width:160px; padding:10px 12px; border:1px solid var(--bd); border-radius:10px; background:white;
      font-size:14px;
    }
    textarea{
      width:100%; min-height:260px; padding:12px; border:1px solid var(--bd); border-radius:12px;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size:12.5px; line-height:1.35; resize:vertical;
    }
    .btns{ display:flex; gap:10px; flex-wrap:wrap; margin-top:10px; }
    button{
      padding:10px 12px; border-radius:12px; border:1px solid var(--bd);
      background:white; cursor:pointer; font-weight:600;
    }
    button.primary{ background:#111827; color:white; border-color:#111827; }
    button:hover{ filter:brightness(.98); }
    .pill{
      display:inline-flex; align-items:center; gap:8px; padding:8px 10px; border:1px solid var(--bd);
      border-radius:999px; background:white; color:var(--mut); font-size:13px;
    }
    .table{
      width:100%; border-collapse:separate; border-spacing:0; overflow:hidden;
      border:1px solid var(--bd); border-radius:14px; background:white;
    }
    .table th, .table td{
      padding:10px 10px; border-bottom:1px solid var(--bd); font-size:13px; vertical-align:top;
    }
    .table th{ text-align:left; color:var(--mut); font-weight:700; background:#fafafa; }
    .table tr:last-child td{ border-bottom:none; }
    .s-ok{ color:#065f46; font-weight:700; }
    .s-hi{ color:#92400e; font-weight:700; }
    .s-lo{ color:#9f1239; font-weight:700; }
    .s-warn{ color:#374151; font-weight:700; }
    .mut{ color:var(--mut); }
    .err{ color:#b91c1c; font-weight:700; }
    .foot{ margin-top:10px; color:var(--mut); font-size:12px; }
    code.k{ background:#f3f4f6; padding:2px 6px; border-radius:8px; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="top">
      <div>
        <h1>–ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–Ω–∞–ª–∏–∑–æ–≤ —Ä–µ–±—ë–Ω–∫–∞ (0‚Äì12 –ª–µ—Ç)</h1>
        <div class="note">–†–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤ –±—Ä–∞—É–∑–µ—Ä–µ. –ù–æ—Ä–º—ã –∏ –∞–Ω–∞–ª–∏–∑—ã —Ç—ã –∑–∞–¥–∞—ë—à—å —Å–∞–º.</div>
      </div>
      <div class="row">
        <div>
          <label for="age">–í–æ–∑—Ä–∞—Å—Ç (–ª–µ—Ç, –º–æ–∂–Ω–æ –¥—Ä–æ–±–Ω–æ: 0.5 = 6 –º–µ—Å—è—Ü–µ–≤)</label>
          <input id="age" type="number" min="0" max="12" step="0.1" value="7" />
        </div>
        <div class="pill" id="ageBandPill">–ì—Ä—É–ø–ø–∞: ‚Äî</div>
      </div>
    </div>

    <div class="grid">
      <div class="card">
        <label>–ù–æ—Ä–º—ã (JSON). –ú–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å. –§–æ—Ä–º–∞—Ç: –ø–æ –≤–æ–∑—Ä–∞—Å—Ç–Ω—ã–º –≥–æ–¥–∞–º 0..12 (–∫–∞–∂–¥—ã–π –≥–æ–¥ –æ—Ç–¥–µ–ª—å–Ω–æ)</label>
        <textarea id="norms"></textarea>
        <div class="foot">
          –ü–æ–¥—Å–∫–∞–∑–∫–∞: —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–∫–∞—è: <code class="k">"0": { "–ì–µ–º–æ–≥–ª–æ–±–∏–Ω": {"unit":"–≥/–ª","min":..,"max":..}, ... }</code>
        </div>
      </div>

      <div class="card">
        <label>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–æ–≤</label>
        <textarea id="results"
          placeholder="–í–≤–µ–¥–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (–ø–æ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ):
–ì–µ–º–æ–≥–ª–æ–±–∏–Ω; 112; –≥/–ª
–õ–µ–π–∫–æ—Ü–∏—Ç—ã; 6.1; 10^9/–ª
–¢—Ä–æ–º–±–æ—Ü–∏—Ç—ã; 420; 10^9/–ª"></textarea>

        <div class="foot">
          –§–æ—Ä–º–∞—Ç: <code class="k">–ü–æ–∫–∞–∑–∞—Ç–µ–ª—å; –∑–Ω–∞—á–µ–Ω–∏–µ; –µ–¥–∏–Ω–∏—Ü—ã</code> (—Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å –º–æ–∂–Ω–æ <code class="k">;</code> –∏–ª–∏ <code class="k">,</code>)<br/>
          –ï—Å–ª–∏ –µ–¥–∏–Ω–∏—Ü—ã –ø—É—Å—Ç—ã–µ ‚Äî —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—Å—è.
        </div>

        <div class="btns">
          <button class="primary" id="checkBtn">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
          <button id="exampleBtn">–ó–∞–ø–æ–ª–Ω–∏—Ç—å –ø—Ä–∏–º–µ—Ä</button>
          <button id="clearBtn">–û—á–∏—Å—Ç–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</button>
          <button id="csvBtn">–°–∫–∞—á–∞—Ç—å CSV</button>
        </div>
        <div class="foot err" id="error"></div>
      </div>
    </div>

    <div class="card" style="margin-top:14px;">
      <label>–û—Ç—á—ë—Ç</label>
      <div id="report"></div>
      <div class="foot">
        ‚ö†Ô∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç. –ü—Ä–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è—Ö ‚Äî –ª—É—á—à–µ –æ–±—Å—É–¥–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å –≤—Ä–∞—á–æ–º –∏ —Å–º–æ—Ç—Ä–µ—Ç—å —Ä–µ—Ñ–µ—Ä–µ–Ω—Å—ã –≤–∞—à–µ–π –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏–∏.
      </div>
    </div>
  </div>

<script>
/**
 * –ù–æ—Ä–º—ã –ü–û –ì–û–î–ê–ú 0..12.
 * –í–ù–ò–ú–ê–ù–ò–ï: –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∏–∂–µ ‚Äî –î–ï–ú–û/—à–∞–±–ª–æ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã –ª–æ–≥–∏–∫–∏.
 * –ó–∞–º–µ–Ω—è–π min/max –Ω–∞ —Ç–µ, –∫–æ—Ç–æ—Ä—ã–µ —Ç—ã ‚Äú–¥–∞—à—å‚Äù (–∏–∑ —Ç–≤–æ–∏—Ö —Ç–∞–±–ª–∏—Ü/–ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏–∏).
 */
const DEFAULT_NORMS_BY_YEAR = {
  "0": {
    "–ì–µ–º–æ–≥–ª–æ–±–∏–Ω":        {"unit":"–≥/–ª","min":100,"max":140},
    "–≠—Ä–∏—Ç—Ä–æ—Ü–∏—Ç—ã":        {"unit":"10^12/–ª","min":3.3,"max":4.9},
    "–ì–µ–º–∞—Ç–æ–∫—Ä–∏—Ç":        {"unit":"%","min":30,"max":41},
    "–õ–µ–π–∫–æ—Ü–∏—Ç—ã":         {"unit":"10^9/–ª","min":6.0,"max":17.5},
    "–ù–µ–π—Ç—Ä–æ—Ñ–∏–ª—ã":        {"unit":"%","min":15,"max":45},
    "–õ–∏–º—Ñ–æ—Ü–∏—Ç—ã":         {"unit":"%","min":45,"max":75},
    "–ú–æ–Ω–æ—Ü–∏—Ç—ã":          {"unit":"%","min":3,"max":12},
    "–≠–æ–∑–∏–Ω–æ—Ñ–∏–ª—ã":        {"unit":"%","min":0,"max":5},
    "–ë–∞–∑–æ—Ñ–∏–ª—ã":          {"unit":"%","min":0,"max":1},
    "–¢—Ä–æ–º–±–æ—Ü–∏—Ç—ã":        {"unit":"10^9/–ª","min":150,"max":450},
    "–°–û–≠":               {"unit":"–º–º/—á","min":0,"max":10},
    "–ì–ª—é–∫–æ–∑–∞":           {"unit":"–º–º–æ–ª—å/–ª","min":3.3,"max":5.5},
    "–ê–õ–¢":               {"unit":"–ï–¥/–ª","min":0,"max":50},
    "–ê–°–¢":               {"unit":"–ï–¥/–ª","min":0,"max":60},
    "–ë–∏–ª–∏—Ä—É–±–∏–Ω –æ–±—â–∏–π":   {"unit":"–º–∫–º–æ–ª—å/–ª","min":3,"max":20}
  },
  "1": {}, "2": {}, "3": {}, "4": {}, "5": {}, "6": {}, "7": {}, "8": {}, "9": {}, "10": {}, "11": {}, "12": {}
};

// –ó–∞–ø–æ–ª–Ω–∏–º 1..12 —Ç–∏–ø–æ–≤—ã–º–∏ (–∫–∞–∫ —à–∞–±–ª–æ–Ω), —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ –ø—É—Å—Ç–æ
const TEMPLATE_1_12 = {
  "–ì–µ–º–æ–≥–ª–æ–±–∏–Ω":        {"unit":"–≥/–ª","min":115,"max":155},
  "–≠—Ä–∏—Ç—Ä–æ—Ü–∏—Ç—ã":        {"unit":"10^12/–ª","min":4.0,"max":5.2},
  "–ì–µ–º–∞—Ç–æ–∫—Ä–∏—Ç":        {"unit":"%","min":35,"max":45},
  "–õ–µ–π–∫–æ—Ü–∏—Ç—ã":         {"unit":"10^9/–ª","min":4.5,"max":13.5},
  "–ù–µ–π—Ç—Ä–æ—Ñ–∏–ª—ã":        {"unit":"%","min":35,"max":65},
  "–õ–∏–º—Ñ–æ—Ü–∏—Ç—ã":         {"unit":"%","min":25,"max":55},
  "–ú–æ–Ω–æ—Ü–∏—Ç—ã":          {"unit":"%","min":3,"max":11},
  "–≠–æ–∑–∏–Ω–æ—Ñ–∏–ª—ã":        {"unit":"%","min":0,"max":5},
  "–ë–∞–∑–æ—Ñ–∏–ª—ã":          {"unit":"%","min":0,"max":1},
  "–¢—Ä–æ–º–±–æ—Ü–∏—Ç—ã":        {"unit":"10^9/–ª","min":150,"max":400},
  "–°–û–≠":               {"unit":"–º–º/—á","min":0,"max":15},
  "–ì–ª—é–∫–æ–∑–∞":           {"unit":"–º–º–æ–ª—å/–ª","min":3.3,"max":5.5},
  "–ê–õ–¢":               {"unit":"–ï–¥/–ª","min":0,"max":40},
  "–ê–°–¢":               {"unit":"–ï–¥/–ª","min":0,"max":40},
  "–ë–∏–ª–∏—Ä—É–±–∏–Ω –æ–±—â–∏–π":   {"unit":"–º–∫–º–æ–ª—å/–ª","min":3,"max":20}
};
for (let y=1; y<=12; y++){
  DEFAULT_NORMS_BY_YEAR[String(y)] = structuredClone(TEMPLATE_1_12);
}

const DEFAULT_RESULTS_TEXT =
`–ì–µ–º–æ–≥–ª–æ–±–∏–Ω; 112; –≥/–ª
–õ–µ–π–∫–æ—Ü–∏—Ç—ã; 6.1; 10^9/–ª
–¢—Ä–æ–º–±–æ—Ü–∏—Ç—ã; 420; 10^9/–ª
–ì–ª—é–∫–æ–∑–∞; 5.2; –º–º–æ–ª—å/–ª
–ê–õ–¢; 55; –ï–¥/–ª`;

const els = {
  age: document.getElementById("age"),
  norms: document.getElementById("norms"),
  results: document.getElementById("results"),
  report: document.getElementById("report"),
  error: document.getElementById("error"),
  ageBandPill: document.getElementById("ageBandPill"),
  checkBtn: document.getElementById("checkBtn"),
  exampleBtn: document.getElementById("exampleBtn"),
  clearBtn: document.getElementById("clearBtn"),
  csvBtn: document.getElementById("csvBtn"),
};

let lastReportRows = [];

function clampAge(a){
  if (Number.isNaN(a)) return 0;
  return Math.min(12, Math.max(0, a));
}

function pickYearBand(ageYears){
  return Math.floor(clampAge(ageYears));
}

function setBandPill(){
  const age = parseFloat(els.age.value);
  const y = pickYearBand(age);
  els.ageBandPill.textContent = `–ì—Ä—É–ø–ø–∞: ${y} –≥–æ–¥(–ª–µ—Ç)`;
}

function parseNorms(){
  const txt = els.norms.value.trim();
  return JSON.parse(txt);
}

function splitLine(line){
  const parts = line.split(";").map(s=>s.trim());
  if (parts.length >= 2) return parts;
  return line.split(",").map(s=>s.trim());
}

function parseResultsText(){
  const lines = els.results.value.split("\n").map(s=>s.trim()).filter(Boolean);
  const items = [];
  for (const line of lines){
    const p = splitLine(line);
    const name = (p[0] || "").trim();
    const valueStr = (p[1] || "").trim();
    const unit = (p[2] || "").trim();

    if (!name || !valueStr) continue;

    const val = Number(String(valueStr).replace(",", "."));
    items.push({ name, value: val, unit });
  }
  return items;
}

function statusClass(st){
  if (st.includes("‚úÖ")) return "s-ok";
  if (st.includes("üî∫")) return "s-hi";
  if (st.includes("üîª")) return "s-lo";
  return "s-warn";
}

function compare(value, min, max){
  if (value < min) return "üîª –Ω–∏–∂–µ –Ω–æ—Ä–º—ã";
  if (value > max) return "üî∫ –≤—ã—à–µ –Ω–æ—Ä–º—ã";
  return "‚úÖ –Ω–æ—Ä–º–∞";
}

function renderTable(rows){
  if (!rows.length){
    els.report.innerHTML = `<div class="mut">–ó–∞–ø–æ–ª–Ω–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏ –Ω–∞–∂–º–∏ ‚Äú–ü—Ä–æ–≤–µ—Ä–∏—Ç—å‚Äù.</div>`;
    return;
  }

  const html = `
  <table class="table">
    <thead>
      <tr>
        <th style="width:24%;">–ü–æ–∫–∞–∑–∞—Ç–µ–ª—å</th>
        <th style="width:14%;">–ó–Ω–∞—á–µ–Ω–∏–µ</th>
        <th style="width:12%;">–ï–¥.</th>
        <th style="width:30%;">–ù–æ—Ä–º–∞</th>
        <th style="width:20%;">–°—Ç–∞—Ç—É—Å</th>
      </tr>
    </thead>
    <tbody>
      ${rows.map(r => `
        <tr>
          <td><b>${escapeHtml(r.name)}</b></td>
          <td>${escapeHtml(String(r.value ?? ""))}</td>
          <td>${escapeHtml(r.unit ?? "")}</td>
          <td class="mut">${escapeHtml(r.normText ?? "‚Äî")}</td>
          <td class="${statusClass(r.status)}">${escapeHtml(r.status)}</td>
        </tr>
      `).join("")}
    </tbody>
  </table>`;
  els.report.innerHTML = html;
}

function escapeHtml(s){
  return String(s).replace(/[&<>"']/g, (m)=>({
    "&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#039;"
  }[m]));
}

function buildReport(){
  els.error.textContent = "";
  lastReportRows = [];

  const age = parseFloat(els.age.value);
  const yearBand = pickYearBand(age);

  let normsByYear;
  try{
    normsByYear = parseNorms();
  }catch(e){
    els.error.textContent = "‚ùå –û—à–∏–±–∫–∞ –≤ JSON –Ω–æ—Ä–º. –ü—Ä–æ–≤–µ—Ä—å –∑–∞–ø—è—Ç—ã–µ/–∫–∞–≤—ã—á–∫–∏.";
    renderTable([]);
    return;
  }

  const norms = normsByYear[String(yearBand)];
  if (!norms || typeof norms !== "object"){
    els.error.textContent = `‚ùå –ù–µ—Ç –Ω–æ—Ä–º –¥–ª—è –≥–æ–¥–∞: ${yearBand}.`;
    renderTable([]);
    return;
  }

  const results = parseResultsText();
  if (!results.length){
    els.error.textContent = "‚ùå –ù–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤. –í–≤–µ–¥–∏ —Å—Ç—Ä–æ–∫–∏ –≤–∏–¥–∞: –ü–æ–∫–∞–∑–∞—Ç–µ–ª—å; –∑–Ω–∞—á–µ–Ω–∏–µ; –µ–¥–∏–Ω–∏—Ü—ã";
    renderTable([]);
    return;
  }

  const rows = [];
  for (const r of results){
    const n = norms[r.name];
    if (!n){
      rows.push({ name: r.name, value: r.value, unit: r.unit, normText: "‚Äî", status: "‚ö†Ô∏è –Ω–µ—Ç –Ω–æ—Ä–º—ã" });
      continue;
    }

    if (!r.unit || !n.unit){
      rows.push({
        name: r.name, value: r.value, unit: r.unit || "",
        normText: `${n.min}‚Äì${n.max} ${n.unit || ""}`.trim(),
        status: "‚ö†Ô∏è –Ω–µ—Ç –µ–¥–∏–Ω–∏—Ü"
      });
      continue;
    }

    if (String(r.unit).trim() !== String(n.unit).trim()){
      rows.push({
        name: r.name, value: r.value, unit: r.unit,
        normText: `${n.min}‚Äì${n.max} ${n.unit}`,
        status: "‚ö†Ô∏è —Ä–∞–∑–Ω—ã–µ –µ–¥–∏–Ω–∏—Ü—ã"
      });
      continue;
    }

    const val = Number(r.value);
    const min = Number(n.min);
    const max = Number(n.max);

    if ([val,min,max].some(x => Number.isNaN(x))){
      rows.push({
        name: r.name, value: r.value, unit: r.unit,
        normText: `${n.min}‚Äì${n.max} ${n.unit}`,
        status: "‚ö†Ô∏è –Ω–µ–≤–µ—Ä–Ω—ã–µ —á–∏—Å–ª–∞"
      });
      continue;
    }

    rows.push({
      name: r.name,
      value: val,
      unit: r.unit,
      normText: `${min}‚Äì${max} ${n.unit}`,
      status: compare(val, min, max)
    });
  }

  lastReportRows = rows;
  renderTable(rows);
}

function downloadCSV(){
  if (!lastReportRows.length){
    els.error.textContent = "‚ùå –°–Ω–∞—á–∞–ª–∞ –Ω–∞–∂–º–∏ ‚Äú–ü—Ä–æ–≤–µ—Ä–∏—Ç—å‚Äù, —á—Ç–æ–±—ã –ø–æ—è–≤–∏–ª—Å—è –æ—Ç—á—ë—Ç.";
    return;
  }
  const header = ["–ü–æ–∫–∞–∑–∞—Ç–µ–ª—å","–ó–Ω–∞—á–µ–Ω–∏–µ","–ï–¥.","–ù–æ—Ä–º–∞","–°—Ç–∞—Ç—É—Å"];
  const lines = [header.join(";")].concat(
    lastReportRows.map(r => [
      r.name, r.value ?? "", r.unit ?? "", r.normText ?? "", r.status ?? ""
    ].map(x => String(x).replaceAll(";", ",")).join(";"))
  );
  const blob = new Blob([lines.join("\n")], {type:"text/csv;charset=utf-8"});
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url;
  a.download = "labs_report.csv";
  document.body.appendChild(a);
  a.click();
  a.remove();
  URL.revokeObjectURL(url);
}

// init
els.norms.value = JSON.stringify(DEFAULT_NORMS_BY_YEAR, null, 2);

// –ì–ª–∞–≤–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ: –Ω–µ –∑–∞–ø–æ–ª–Ω—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ–∫—Å—Ç–æ–º (—á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ "–∞–∫—Ç–∏–≤–Ω–æ–≥–æ" –≤—ã–¥–µ–ª–µ–Ω–∏—è)
els.results.value = "";

setBandPill();

// –ì–ª–∞–≤–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ: –Ω–µ —Å—Ç—Ä–æ–∏–º –æ—Ç—á—ë—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (–∂–¥—ë–º –∫–Ω–æ–ø–∫—É "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å")
renderTable([]);

// events
els.age.addEventListener("input", () => { setBandPill(); });
els.checkBtn.addEventListener("click", buildReport);
els.exampleBtn.addEventListener("click", () => {
  els.results.value = DEFAULT_RESULTS_TEXT;
  els.error.textContent = "";
  buildReport();
});
els.clearBtn.addEventListener("click", () => {
  els.results.value = "";
  els.error.textContent = "";
  renderTable([]);
});
els.csvBtn.addEventListener("click", downloadCSV);
</script>
</body>
</html>
